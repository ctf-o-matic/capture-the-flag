{% extends "base.html" %}

{% block pagetitle %}Capture The Flag{% endblock %}

{% block keywords %}{% endblock %}

{% block description %}{% endblock %}

{% block content %}

<div class="jumbotron bg-transparent mb-0 radius-0">
  <div class="container">
      <div class="row">
        <div class="col-xl-12">
          {% if not team %}
            {% include 'leaderboard/team-join.html' %}
          {% else %}
            {% if team.is_done %}
                {% include 'leaderboard/team-done.html' %}
            {% elif team.is_level0 %}
                {% include 'leaderboard/team-level0.html' %}
            {% else %}
                {% include 'leaderboard/team-next.html' %}
            {% endif %}

            {% if submissions %}
                <h2 class="mb-3 mt-3">Submissions</h2>
                <div class="list-group col-xl-6">
                {% for submission in submissions %}
                  <div class="list-group-item">
                    <div class="d-flex justify-content-between">
                      <code>{{submission.level_name}}</code>
                      <small>{{submission.date}}</small>
                    </div>
                  </div>
                {% endfor %}
                </div>
            {% endif %}

            <h2 class="mb-3 mt-3">Team: {{team.name}}</h2>

            <ul>
                {% for tm in team.teammember_set.all %}
                    <li>{{ tm.user.get_full_name }}</li>
                {% endfor %}
            </ul>

            {% if user_can_leave %}
                <div class="alert alert-warning d-flex justify-content-between align-items-center">
                    While the team has not submitted a solution, you may still leave this team to join another team, if needed.
                    <a href="{% url 'leaderboard:leave-team' %}" class="btn btn-warning">Leave team</a>
                </div>
            {% endif %}
          {% endif %}
        </div>
      </div>
  </div>
</div>

{% endblock %}
